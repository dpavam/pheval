# Makefile Use Cases
- [Makefile Use Cases](#makefile-use-cases)
  - [Command Line Options](#command-line-options)
  - [**Use Case:** PhEval - Scrambling process](#use-case-pheval---scrambling-process)
    - [**Description:** The data workflow implemented using Makefile](#description-the-data-workflow-implemented-using-makefile)
    - [Example of data structure generated by build process:](#example-of-data-structure-generated-by-build-process)
  - [**Use Case:** PhEval - Clean Data](#use-case-pheval---clean-data)
## Command Line Options

---

```
build           :Run download unzip and build targets
download        :Download exomiser, human genome and phenotypic data
unzip           :Unzip all download files from download target.
prepare_dataset :Dump tables from phenotypic H2 database, scramble and save them in tsv files
clean           :Remove all downloaded unzipped and dumped data.
flags
                 EXOMISER: sets exomiser version (default: 13.1.0)
                 HG: sets human genome version (default: hg19)
                 PHENOTYPE: sets phenotype version (default: 2209)
                 SCRAMBLE_FACTOR: sets scramble factor (default: 0.5)

                 Example: make build EXOMISER=13.0.1 HG=hg19 PHENOTYPE=2209
                 Simplified example version using default values: make build

```

## **Use Case:** PhEval - Scrambling process

### **Description:** The data workflow implemented using Makefile

```mermaid
 flowchart TD
  b(Build Process) -->
  d(Download)-->
  de(Download Exomiser Data)
  d-->
  dh(Download Human Genome)
  d-->
  dp(Download Phenotype Data)
  dh-->
  u(Uncompress Data)
  de-->
  u
  dp-->
  u -->
  dump(Prepare Database) -->
  m(Phenotypic Mapping Tables Dump ) -->
  m1(HP_HP) 
  m -->
  m2(HP_MP)
  m -->
  m3(HP_ZP)
  m1 -->
  s(Scramble Process)
  m2 -->
  s(Scramble Process)
  m3 -->
  s(Scramble Process) -->
  save(Save Scrambled Data)
```

---

### Example of data structure generated by build process:

```
ðŸ“¦inputs
 â”— ðŸ“‚data
 â”ƒ â”£ ðŸ“‚run_exomiser13.1.0
 â”ƒ â”ƒ â”£ ðŸ“œHP_HP_MAPPINGS.tsv
 â”ƒ â”ƒ â”£ ðŸ“œHP_MP_MAPPINGS.tsv
 â”ƒ â”ƒ â”— ðŸ“œHP_ZP_MAPPINGS.tsv
 â”ƒ â”£ ðŸ“‚run_exomiser13.1.0_scrambled_0.5
 â”ƒ â”ƒ â”— ðŸ“œHP_HP_MAPPINGS.tsv
 â”ƒ â”ƒ â”£ ðŸ“œHP_MP_MAPPINGS.tsv
 â”ƒ â”ƒ â”— ðŸ“œHP_ZP_MAPPINGS.tsv
 â”ƒ â”— ðŸ“‚run_exomiser13.1.0_scrambled_0.75
 â”ƒ â”ƒ â”£ ðŸ“œHP_HP_MAPPINGS.tsv
 â”ƒ â”ƒ â”£ ðŸ“œHP_MP_MAPPINGS.tsv
 â”ƒ â”ƒ â”— ðŸ“œHP_ZP_MAPPINGS.tsv
ðŸ“¦raw
 â”£ ðŸ“‚data
 â”ƒ â”£ ðŸ“‚2209_hg19
 â”ƒ â”ƒ â”£ ðŸ“‚2209_hg19
 â”ƒ â”ƒ â”ƒ â”£ ðŸ“œ2209_hg19_clinvar_whitelist.tsv.gz
 â”ƒ â”ƒ â”ƒ â”£ ðŸ“œ2209_hg19_clinvar_whitelist.tsv.gz.tbi
 â”ƒ â”ƒ â”ƒ â”£ ðŸ“œ2209_hg19_genome.h2.db
 â”ƒ â”ƒ â”ƒ â”£ ðŸ“œ2209_hg19_transcripts_ensembl.ser
 â”ƒ â”ƒ â”ƒ â”£ ðŸ“œ2209_hg19_transcripts_refseq.ser
 â”ƒ â”ƒ â”ƒ â”£ ðŸ“œ2209_hg19_transcripts_ucsc.ser
 â”ƒ â”ƒ â”ƒ â”— ðŸ“œ2209_hg19_variants.mv.db
 â”ƒ â”ƒ â”— ðŸ“œ2209_hg19.sha256
 â”ƒ â”£ ðŸ“‚2209_phenotype
 â”ƒ â”ƒ â”£ ðŸ“‚2209_phenotype
 â”ƒ â”ƒ â”ƒ â”£ ðŸ“‚phenix
 â”ƒ â”ƒ â”ƒ â”ƒ â”£ ðŸ“‚out
 â”ƒ â”ƒ â”ƒ â”ƒ â”ƒ â”£ ðŸ“œ1.out
 â”ƒ â”ƒ â”ƒ â”ƒ â”ƒ â”£ ðŸ“œ10.out
 â”ƒ â”ƒ â”ƒ â”ƒ â”£ ðŸ“œALL_SOURCES_ALL_FREQUENCIES_genes_to_phenotype.txt
 â”ƒ â”ƒ â”ƒ â”ƒ â”— ðŸ“œhp.obo
 â”ƒ â”ƒ â”ƒ â”£ ðŸ“œ2209_phenotype.h2.db
 â”ƒ â”ƒ â”ƒ â”£ ðŸ“œ2209_phenotype.h2.db.mv.db
 â”ƒ â”ƒ â”ƒ â”£ ðŸ“œ2209_phenotype.h2.db.trace.db
 â”ƒ â”ƒ â”ƒ â”£ ðŸ“œ2209_phenotype.trace.db
 â”ƒ â”ƒ â”ƒ â”£ ðŸ“œhp.obo
 â”ƒ â”ƒ â”ƒ â”— ðŸ“œrw_string_10.mv
 â”ƒ â”ƒ â”— ðŸ“œ2209_phenotype.sha256
 â”ƒ â”£ ðŸ“œ2209_hg19.zip
 â”ƒ â”— ðŸ“œ2209_phenotype.zip
 â”£ ðŸ“‚exomiser-cli-13.1.0
 â”ƒ â”£ ðŸ“‚examples
 â”ƒ â”ƒ â”£ ðŸ“œPfeiffer.vcf
 â”ƒ â”ƒ â”£ ðŸ“œPfeiffer.vcf.gz
 â”ƒ â”ƒ â”£ ðŸ“œPfeiffer.vcf.gz.tbi
 â”ƒ â”ƒ â”£ ðŸ“œexome-analysis.yml
 â”ƒ â”ƒ â”£ ðŸ“œoutput-options.yml
 â”ƒ â”ƒ â”— ðŸ“œtest-analysis-multisample.yml
 â”ƒ â”£ ðŸ“‚lib
 â”ƒ â”— ðŸ“œexomiser-cli-13.1.0.jar
 â”£ ðŸ“‚lib
 â”ƒ â”— ðŸ“œh2.jar
 â”— ðŸ“œexomiser-cli-13.1.0-distribution.zip
```

---

## **Use Case:** PhEval - Clean Data

 **Description:** The clean target


```mermaid
 flowchart TD
  c(Clean) -->
  r(Remove - rm -r) -->
  e(Exomiser Data)
  r -->
  h(Human Genome Data)
  r -->
  p(Phenotypic Data)
  r -->
  s(Scrambled Data)
